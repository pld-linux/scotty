diff -ur scotty-2.1.10.orig/unix/Makefile.in scotty-2.1.10/unix/Makefile.in
--- scotty-2.1.10.orig/unix/Makefile.in	Mon Sep  7 19:12:57 1998
+++ scotty-2.1.10/unix/Makefile.in	Sun Apr  9 20:05:56 2000
@@ -44,7 +44,7 @@
 TKI_INSTALL_DIR =	$(prefix)/lib/tkined$(TKI_VERSION)
 
 # Top-level directory for manual entries:
-MAN_INSTALL_DIR =	$(prefix)/man
+MAN_INSTALL_DIR =	$(prefix)/share/man
 
 # Directory in which to install the manual entries:
 MAN1_INSTALL_DIR =	$(MAN_INSTALL_DIR)/man1
@@ -432,9 +432,9 @@
 check: tnm-check
 
 tnm-check: scotty
-	@TCLLIBPATH="$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
+	@TCLLIBPATH="$(DESTDIR)$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
 	export TCLLIBPATH; \
-	pwd=`pwd`; cd $(TNM_TEST_DIR); $$pwd/scotty all
+	pwd=`pwd`; cd $(DESTDIR)$(TNM_TEST_DIR); $$pwd/scotty all
 
 install: tnm-install install-man tki-install
 	@echo ""
@@ -457,128 +457,128 @@
 install-man:
 	@for i in $(MAN_INSTALL_DIR) $(MAN1_INSTALL_DIR) $(MAN8_INSTALL_DIR) $(MANN_INSTALL_DIR) ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@cd $(TOP_DIR)/doc; for i in *.1; \
 	    do \
 	    echo "Installing $(TOP_DIR)/doc/$$i"; \
-	    rm -f $(MAN1_INSTALL_DIR)/$$i; \
+	    rm -f $(DESTDIR)$(MAN1_INSTALL_DIR)/$$i; \
 	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
 		-e 's/%TNM_VERSION%/$(TNM_VERSION)/' \
 		-e 's/%TKI_VERSION%/$(TKI_VERSION)/' \
-		    $$i > $(MAN1_INSTALL_DIR)/$$i; \
-	    chmod 444 $(MAN1_INSTALL_DIR)/$$i; \
+		    $$i > $(DESTDIR)$(MAN1_INSTALL_DIR)/$$i; \
+	    chmod 444 $(DESTDIR)$(MAN1_INSTALL_DIR)/$$i; \
 	    done;
 	@cd $(TOP_DIR)/doc; for i in *.8; \
 	    do \
 	    echo "Installing $(TOP_DIR)/doc/$$i"; \
-	    rm -f $(MAN8_INSTALL_DIR)/$$i; \
+	    rm -f $(DESTDIR)$(MAN8_INSTALL_DIR)/$$i; \
 	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
 		-e 's/%TNM_VERSION%/$(TNM_VERSION)/' \
 		-e 's/%TKI_VERSION%/$(TKI_VERSION)/' \
-		    $$i > $(MAN8_INSTALL_DIR)/$$i; \
-	    chmod 444 $(MAN8_INSTALL_DIR)/$$i; \
+		    $$i > $(DESTDIR)$(MAN8_INSTALL_DIR)/$$i; \
+	    chmod 444 $(DESTDIR)$(MAN8_INSTALL_DIR)/$$i; \
 	    done;
 	@cd $(TOP_DIR)/doc; for i in *.n; \
 	    do \
 	    echo "Installing $(TOP_DIR)/doc/$$i"; \
-	    rm -f $(MANN_INSTALL_DIR)/$$i; \
+	    rm -f $(DESTDIR)$(MANN_INSTALL_DIR)/$$i; \
 	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
 		-e 's/%TNM_VERSION%/$(TNM_VERSION)/' \
 		-e 's/%TKI_VERSION%/$(TKI_VERSION)/' \
-		    $$i > $(MANN_INSTALL_DIR)/$$i; \
-	    chmod 444 $(MANN_INSTALL_DIR)/$$i; \
+		    $$i > $(DESTDIR)$(MANN_INSTALL_DIR)/$$i; \
+	    chmod 444 $(DESTDIR)$(MANN_INSTALL_DIR)/$$i; \
 	    done;
 
 tnm-install-bin: scotty tnm$(SHLIB_SUFFIX)
 	@for i in $(BIN_INSTALL_DIR) $(LIB_RUNTIME_DIR) $(TNM_INSTALL_DIR) ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@echo "Installing scotty$(TNM_VERSION) and tnm$(TNM_VERSION)$(SHLIB_SUFFIX)"
-	@$(INSTALL_PROGRAM) scotty $(BIN_INSTALL_DIR)/scotty$(TNM_VERSION)
-	@$(INSTALL_DATA) tnm$(SHLIB_SUFFIX) $(LIB_RUNTIME_DIR)/tnm$(TNM_VERSION)$(SHLIB_SUFFIX)
-	@chmod 555 $(LIB_RUNTIME_DIR)/tnm$(TNM_VERSION)$(SHLIB_SUFFIX)
-	@echo 'package ifneeded Tnm $(TNM_VERSION) "load $(LIB_RUNTIME_DIR)/tnm$(TNM_VERSION)[info sharedlibextension]"' > $(TNM_INSTALL_DIR)/pkgIndex.tcl
+	@$(INSTALL_PROGRAM) scotty $(DESTDIR)$(BIN_INSTALL_DIR)/scotty$(TNM_VERSION)
+	@$(INSTALL_DATA) tnm$(SHLIB_SUFFIX) $(DESTDIR)$(LIB_RUNTIME_DIR)/tnm$(TNM_VERSION)$(SHLIB_SUFFIX)
+	@chmod 555 $(DESTDIR)$(LIB_RUNTIME_DIR)/tnm$(TNM_VERSION)$(SHLIB_SUFFIX)
+	@echo 'package ifneeded Tnm $(TNM_VERSION) "load $(LIB_RUNTIME_DIR)/tnm$(TNM_VERSION)[info sharedlibextension]"' > $(DESTDIR)$(TNM_INSTALL_DIR)/pkgIndex.tcl
 
 tnm-install-mibs:
 	@for i in $(TNM_INSTALL_DIR)/mibs ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@for i in $(TNM_MIB_DIR)/*.mib $(TNM_MIB_DIR)/*.smi $(TNM_MIB_DIR)/*.tc $(TNM_MIB_DIR)/*.gdmo ; \
             do \
 	    echo "Installing $$i"; \
-	    $(INSTALL_DATA) $$i $(TNM_INSTALL_DIR)/mibs ; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(TNM_INSTALL_DIR)/mibs ; \
 	    done
-	@TCLLIBPATH="$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
-	export TCLLIBPATH; \
-	echo 'foreach f $$tnm(mibs) {puts "Parsing $$f"; mib load $$f}; exit' | \
-		./scotty
+#	@TCLLIBPATH="$(DESTDIR)$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
+#	export TCLLIBPATH; \
+#	echo 'foreach f $$tnm(mibs) {puts "Parsing $$f"; mib load $$f}; exit' | \
+#		./scotty
 
 tnm-install-library:
 	@for i in $(TNM_INSTALL_DIR)/library ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@for i in $(TNM_LIBRARY_DIR)/README $(TNM_LIBRARY) ; \
 	    do \
 	    echo "Installing $$i"; \
-	    $(INSTALL_DATA) $$i $(TNM_INSTALL_DIR)/library; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(TNM_INSTALL_DIR)/library; \
 	    done
-	@TCLLIBPATH="$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
-	export TCLLIBPATH; \
-	echo 'cd $(TNM_INSTALL_DIR)/library; auto_mkindex . *.tcl; exit' | \
-	    ./scotty
+#	@TCLLIBPATH="$(DESTDIR)$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
+#	export TCLLIBPATH; \
+#	echo 'cd $(DESTDIR)$(TNM_INSTALL_DIR)/library; auto_mkindex . *.tcl; exit' | \
+#	    ./scotty
 
 tnm-install-examples:
 	@for i in $(TNM_INSTALL_DIR)/examples ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@for i in $(TNM_EXAMPLES) ; do \
 	    echo "Installing $$i"; \
 	    base=`basename $$i`; \
-	    rm -f $(TNM_INSTALL_DIR)/examples/$$base; \
+	    rm -f $(DESTDIR)$(TNM_INSTALL_DIR)/examples/$$base; \
 	    sed -e 's/^exec scotty.*$$/exec scotty$(TNM_VERSION) "$$0" "$$@"/'\
 		-e 's+^exec wish.*$$+exec $(TK_WISH) "$$0" "$$@"+'\
-		    $$i > $(TNM_INSTALL_DIR)/examples/$$base; \
-	    chmod 755 $(TNM_INSTALL_DIR)/examples/$$base; \
-	    $(INSTALL_DATA) $$i.n $(TNM_INSTALL_DIR)/examples; \
+		    $$i > $(DESTDIR)$(TNM_INSTALL_DIR)/examples/$$base; \
+	    chmod 755 $(DESTDIR)$(TNM_INSTALL_DIR)/examples/$$base; \
+	    $(INSTALL_DATA) $$i.n $(DESTDIR)$(TNM_INSTALL_DIR)/examples; \
 	    done
 
 tnm-install-agents:
 	@for i in $(TNM_INSTALL_DIR)/agents ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
@@ -588,72 +588,72 @@
 	    base=`basename $$i`; \
 	    rm -f $(TNM_INSTALL_DIR)/agents/$$base; \
 	    sed -e 's/^exec scotty.*$$/exec scotty$(TNM_VERSION) "$$0" "$$@"/'\
-		    $$i > $(TNM_INSTALL_DIR)/agents/$$base; \
-	    chmod 755 $(TNM_INSTALL_DIR)/agents/$$base; \
+		    $$i > $(DESTDIR)$(TNM_INSTALL_DIR)/agents/$$base; \
+	    chmod 755 $(DESTDIR)$(TNM_INSTALL_DIR)/agents/$$base; \
 	    done
 	@for i in $(TNM_AGENTS) $(TNM_AGENT_DIR)/README ; \
 	    do \
 	    echo "Installing $$i"; \
-	    $(INSTALL_DATA) $$i $(TNM_INSTALL_DIR)/agents; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(TNM_INSTALL_DIR)/agents; \
 	    done
 
 tki-install-bin: tkined tkined$(SHLIB_SUFFIX) $(TKI_LIBRARY_DIR)/pkgIndex.tcl
 	@for i in $(BIN_INSTALL_DIR) $(LIB_RUNTIME_DIR) $(TKI_INSTALL_DIR) ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@echo "Installing tkined$(TKI_VERSION) and tkined$(TKI_VERSION)$(SHLIB_SUFFIX)"
-	@$(INSTALL_PROGRAM) tkined $(BIN_INSTALL_DIR)/tkined$(TKI_VERSION)
-	@$(INSTALL_DATA) tkined$(SHLIB_SUFFIX) $(LIB_RUNTIME_DIR)/tkined$(TKI_VERSION)$(SHLIB_SUFFIX)
-	@chmod 555 $(LIB_RUNTIME_DIR)/tkined$(TKI_VERSION)$(SHLIB_SUFFIX)
-	@echo 'package ifneeded Tkined $(TKI_VERSION) "load $(LIB_RUNTIME_DIR)/tkined$(TKI_VERSION)[info sharedlibextension]"' > $(TKI_INSTALL_DIR)/pkgIndex.tcl
-	@$(INSTALL_DATA) $(TKI_DIR)/tkined.defaults $(TKI_INSTALL_DIR)
+	@$(INSTALL_PROGRAM) tkined $(DESTDIR)$(BIN_INSTALL_DIR)/tkined$(TKI_VERSION)
+	@$(INSTALL_DATA) tkined$(SHLIB_SUFFIX) $(DESTDIR)$(LIB_RUNTIME_DIR)/tkined$(TKI_VERSION)$(SHLIB_SUFFIX)
+	@chmod 555 $(DESTDIR)$(LIB_RUNTIME_DIR)/tkined$(TKI_VERSION)$(SHLIB_SUFFIX)
+	@echo 'package ifneeded Tkined $(TKI_VERSION) "load $(LIB_RUNTIME_DIR)/tkined$(TKI_VERSION)[info sharedlibextension]"' > $(DESTDIR)$(TKI_INSTALL_DIR)/pkgIndex.tcl
+	@$(INSTALL_DATA) $(TKI_DIR)/tkined.defaults $(DESTDIR)$(TKI_INSTALL_DIR)
 
 tki-install-library:
 	@for i in $(TKI_INSTALL_DIR)/library ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@for i in $(TKI_LIBRARY) ; \
 	    do \
 	    echo "Installing $$i"; \
-	    $(INSTALL_DATA) $$i $(TKI_INSTALL_DIR)/library; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(TKI_INSTALL_DIR)/library; \
 	    done
-	@$(INSTALL_DATA) $(TKI_LIBRARY_DIR)/pkgIndex.tcl $(TKI_INSTALL_DIR)/library
+	@$(INSTALL_DATA) $(TKI_LIBRARY_DIR)/pkgIndex.tcl $(DESTDIR)$(TKI_INSTALL_DIR)/library
 
 tki-install-bitmaps:
 	@for i in $(TKI_INSTALL_DIR)/bitmaps ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@for i in $(TKI_DIR)/bitmaps/*.xbm ; \
 	    do \
 	    echo "Installing $$i"; \
-	    $(INSTALL_DATA) $$i $(TKI_INSTALL_DIR)/bitmaps ; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(TKI_INSTALL_DIR)/bitmaps ; \
 	    done
 
 tki-install-apps:
 	@for i in $(TKI_INSTALL_DIR)/apps ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
-		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
+		echo "Making directory $(DESTDIR)$$i"; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
@@ -661,36 +661,36 @@
 	    do \
 	    echo "Installing $$i"; \
 	    base=`basename $$i`; \
-	    rm -f $(TKI_INSTALL_DIR)/apps/$$base; \
+	    rm -f $(DESTDIR)$(TKI_INSTALL_DIR)/apps/$$base; \
 	    sed -e 's/^exec scotty.*$$/exec scotty$(TNM_VERSION) "$$0" "$$@"/'\
 		-e 's+^exec wish.*$$+exec $(TK_WISH) "$$0" "$$@"+'\
-		    $$i > $(TKI_INSTALL_DIR)/apps/$$base; \
-	    chmod 755 $(TKI_INSTALL_DIR)/apps/$$base; \
+		    $$i > $(DESTDIR)$(TKI_INSTALL_DIR)/apps/$$base; \
+	    chmod 755 $(DESTDIR)$(TKI_INSTALL_DIR)/apps/$$base; \
 	    done
 	@for i in $(TKI_MISC) ; \
 	    do \
 	    echo "Installing $$i"; \
-	    $(INSTALL_DATA) $$i $(TKI_INSTALL_DIR)/apps; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(TKI_INSTALL_DIR)/apps; \
 	    done
-	@TCLLIBPATH="$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
-	export TCLLIBPATH; \
-	echo 'cd $(TKI_INSTALL_DIR)/apps; auto_mkindex . library.tcl; exit' | \
-		$(TCL_TCLSH)
+#	@TCLLIBPATH="$(DESTDIR)$(TNM_INSTALL_DIR) $$TCLLIBPATH"; \
+#	export TCLLIBPATH; \
+#	echo 'cd $(DESTDIR)$(TKI_INSTALL_DIR)/apps; auto_mkindex . library.tcl; exit' | \
+#		$(TCL_TCLSH)
 
 sinstall: ntping straps
 	@for i in $(BIN_INSTALL_DIR) ; \
 	    do \
-	    if [ ! -d $$i ] ; then \
+	    if [ ! -d $(DESTDIR)$$i ] ; then \
 		echo "Making directory $$i"; \
-		$(MKDIR) -p $$i; \
-		chmod 755 $$i; \
+		$(MKDIR) -p $(DESTDIR)$$i; \
+		chmod 755 $(DESTDIR)$$i; \
 		else true; \
 		fi; \
 	    done;
 	@for i in ntping straps ; \
 	    do \
 	    echo "Installing $$i"; \
-	    $(INSTALL_PROGRAM) -o root -m 4755 $$i $(BIN_INSTALL_DIR)/$$i; \
+	    $(INSTALL_PROGRAM) $$i $(DESTDIR)$(BIN_INSTALL_DIR)/$$i; \
 	    done
 
 uninstall: tnm-uninstall uninstall-man tki-uninstall
